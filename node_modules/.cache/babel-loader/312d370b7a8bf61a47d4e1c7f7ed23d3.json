{"ast":null,"code":"import \"core-js/modules/es.array.flat\";\nimport \"core-js/modules/es.array.unscopables.flat\";\nimport _classCallCheck from \"/home/bitnami/Viewers/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/bitnami/Viewers/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/bitnami/Viewers/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/bitnami/Viewers/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/bitnami/Viewers/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/bitnami/Viewers/src/App.js\";\nimport './config';\nimport { CommandsManager, ExtensionManager, HotkeysManager, utils } from 'ohif-core';\nimport React, { Component } from 'react';\nimport { getUserManagerForOpenIdConnectClient, initWebWorkers } from './utils/index.js';\nimport { I18nextProvider } from 'react-i18next';\nimport OHIFCornerstoneExtension from '@ohif/extension-cornerstone';\nimport OHIFDicomHtmlExtension from '@ohif/extension-dicom-html';\nimport OHIFDicomMicroscopyExtension from '@ohif/extension-dicom-microscopy';\nimport OHIFDicomPDFExtension from '@ohif/extension-dicom-pdf';\nimport OHIFStandaloneViewer from './OHIFStandaloneViewer';\nimport OHIFVTKExtension from '@ohif/extension-vtk';\nimport { OidcProvider } from 'redux-oidc';\nimport PropTypes from 'prop-types';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport WhiteLabellingContext from './WhiteLabellingContext';\nimport appCommands from './appCommands';\nimport { getActiveContexts as _getActiveContexts } from './store/layout/selectors.js';\nimport i18n from '@ohif/i18n';\nimport setupTools from './setupTools';\nimport store from './store'; // Imported flat feature since is not transpiled for old browser versions\n\n// ~~~~ APP SETUP\nvar commandsManagerConfig = {\n  getAppState: function getAppState() {\n    return store.getState();\n  },\n  getActiveContexts: function getActiveContexts() {\n    return _getActiveContexts(store.getState());\n  }\n};\nvar commandsManager = new CommandsManager(commandsManagerConfig);\nvar hotkeysManager = new HotkeysManager(commandsManager);\nvar extensionManager = new ExtensionManager({\n  commandsManager: commandsManager\n}); // TODO: Should be done in extensions w/ commandsModule\n// ~~ ADD COMMANDS\n\nappCommands.init(commandsManager);\n\nif (window.config.hotkeys) {\n  hotkeysManager.setHotkeys(window.config.hotkeys, true);\n} // ~~~~ END APP SETUP\n\n\nsetupTools(store); // const children = {\n//   viewport: [<ConnectedToolContextMenu key=\"tool-context\" />],\n// };\n\n/** TODO: extensions should be passed in as prop as soon as we have the extensions as separate packages and then registered by ExtensionsManager */\n\nextensionManager.registerExtensions([OHIFCornerstoneExtension, OHIFVTKExtension, OHIFDicomPDFExtension, OHIFDicomHtmlExtension, OHIFDicomMicroscopyExtension]); // TODO[react] Use a provider when the whole tree is React\n\nwindow.store = store;\n\nfunction handleServers(servers) {\n  if (servers) {\n    utils.addServers(servers, store);\n  }\n}\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    if (_this.props.oidc.length) {\n      var firstOpenIdClient = _this.props.oidc[0];\n      _this.userManager = getUserManagerForOpenIdConnectClient(store, firstOpenIdClient);\n    }\n\n    handleServers(_this.props.servers);\n    initWebWorkers(_this.props.routerBasename, _this.props.relativeWebWorkerScriptsPath);\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"render\",\n    value: function render() {\n      var userManager = this.userManager;\n\n      if (userManager) {\n        return React.createElement(Provider, {\n          store: store,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, React.createElement(I18nextProvider, {\n          i18n: i18n,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }, React.createElement(OidcProvider, {\n          store: store,\n          userManager: userManager,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }, React.createElement(Router, {\n          basename: this.props.routerBasename,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, React.createElement(WhiteLabellingContext.Provider, {\n          value: this.props.whiteLabelling,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, React.createElement(OHIFStandaloneViewer, {\n          userManager: userManager,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        }))))));\n      }\n\n      return React.createElement(Provider, {\n        store: store,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(I18nextProvider, {\n        i18n: i18n,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(Router, {\n        basename: this.props.routerBasename,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(WhiteLabellingContext.Provider, {\n        value: this.props.whiteLabelling,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(OHIFStandaloneViewer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nApp.propTypes = {\n  routerBasename: PropTypes.string.isRequired,\n  relativeWebWorkerScriptsPath: PropTypes.string.isRequired,\n  servers: PropTypes.object.isRequired,\n  oidc: PropTypes.array,\n  whiteLabelling: PropTypes.object\n};\nApp.defaultProps = {\n  whiteLabelling: {},\n  oidc: []\n};\nexport default App; // Make our managers accessible\n\nexport { commandsManager, extensionManager, hotkeysManager };","map":{"version":3,"sources":["/home/bitnami/Viewers/src/App.js"],"names":["CommandsManager","ExtensionManager","HotkeysManager","utils","React","Component","getUserManagerForOpenIdConnectClient","initWebWorkers","I18nextProvider","OHIFCornerstoneExtension","OHIFDicomHtmlExtension","OHIFDicomMicroscopyExtension","OHIFDicomPDFExtension","OHIFStandaloneViewer","OHIFVTKExtension","OidcProvider","PropTypes","Provider","BrowserRouter","Router","WhiteLabellingContext","appCommands","getActiveContexts","i18n","setupTools","store","commandsManagerConfig","getAppState","getState","commandsManager","hotkeysManager","extensionManager","init","window","config","hotkeys","setHotkeys","registerExtensions","handleServers","servers","addServers","App","props","oidc","length","firstOpenIdClient","userManager","routerBasename","relativeWebWorkerScriptsPath","whiteLabelling","propTypes","string","isRequired","object","array","defaultProps"],"mappings":"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","sourcesContent":["import './config';\n\nimport {\n  CommandsManager,\n  ExtensionManager,\n  HotkeysManager,\n  utils,\n} from 'ohif-core';\nimport React, { Component } from 'react';\nimport {\n  getUserManagerForOpenIdConnectClient,\n  initWebWorkers,\n} from './utils/index.js';\n\nimport { I18nextProvider } from 'react-i18next';\nimport OHIFCornerstoneExtension from '@ohif/extension-cornerstone';\nimport OHIFDicomHtmlExtension from '@ohif/extension-dicom-html';\nimport OHIFDicomMicroscopyExtension from '@ohif/extension-dicom-microscopy';\nimport OHIFDicomPDFExtension from '@ohif/extension-dicom-pdf';\nimport OHIFStandaloneViewer from './OHIFStandaloneViewer';\nimport OHIFVTKExtension from '@ohif/extension-vtk';\nimport { OidcProvider } from 'redux-oidc';\nimport PropTypes from 'prop-types';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport WhiteLabellingContext from './WhiteLabellingContext';\nimport appCommands from './appCommands';\nimport { getActiveContexts } from './store/layout/selectors.js';\nimport i18n from '@ohif/i18n';\nimport setupTools from './setupTools';\nimport store from './store';\n// Imported flat feature since is not transpiled for old browser versions\nimport 'core-js/features/array/flat';\n\n// ~~~~ APP SETUP\nconst commandsManagerConfig = {\n  getAppState: () => store.getState(),\n  getActiveContexts: () => getActiveContexts(store.getState()),\n};\n\nconst commandsManager = new CommandsManager(commandsManagerConfig);\nconst hotkeysManager = new HotkeysManager(commandsManager);\nconst extensionManager = new ExtensionManager({ commandsManager });\n\n// TODO: Should be done in extensions w/ commandsModule\n// ~~ ADD COMMANDS\nappCommands.init(commandsManager);\nif (window.config.hotkeys) {\n  hotkeysManager.setHotkeys(window.config.hotkeys, true);\n}\n// ~~~~ END APP SETUP\n\nsetupTools(store);\n\n// const children = {\n//   viewport: [<ConnectedToolContextMenu key=\"tool-context\" />],\n// };\n\n/** TODO: extensions should be passed in as prop as soon as we have the extensions as separate packages and then registered by ExtensionsManager */\nextensionManager.registerExtensions([\n  OHIFCornerstoneExtension,\n  OHIFVTKExtension,\n  OHIFDicomPDFExtension,\n  OHIFDicomHtmlExtension,\n  OHIFDicomMicroscopyExtension,\n]);\n\n// TODO[react] Use a provider when the whole tree is React\nwindow.store = store;\n\nfunction handleServers(servers) {\n  if (servers) {\n    utils.addServers(servers, store);\n  }\n}\n\nclass App extends Component {\n  static propTypes = {\n    routerBasename: PropTypes.string.isRequired,\n    relativeWebWorkerScriptsPath: PropTypes.string.isRequired,\n    servers: PropTypes.object.isRequired,\n    oidc: PropTypes.array,\n    whiteLabelling: PropTypes.object,\n  };\n\n  static defaultProps = {\n    whiteLabelling: {},\n    oidc: [],\n  };\n\n  constructor(props) {\n    super(props);\n\n    if (this.props.oidc.length) {\n      const firstOpenIdClient = this.props.oidc[0];\n\n      this.userManager = getUserManagerForOpenIdConnectClient(\n        store,\n        firstOpenIdClient\n      );\n    }\n    handleServers(this.props.servers);\n    initWebWorkers(\n      this.props.routerBasename,\n      this.props.relativeWebWorkerScriptsPath\n    );\n  }\n\n  render() {\n    const userManager = this.userManager;\n\n    if (userManager) {\n      return (\n        <Provider store={store}>\n          <I18nextProvider i18n={i18n}>\n            <OidcProvider store={store} userManager={userManager}>\n              <Router basename={this.props.routerBasename}>\n                <WhiteLabellingContext.Provider\n                  value={this.props.whiteLabelling}\n                >\n                  <OHIFStandaloneViewer userManager={userManager} />\n                </WhiteLabellingContext.Provider>\n              </Router>\n            </OidcProvider>\n          </I18nextProvider>\n        </Provider>\n      );\n    }\n\n    return (\n      <Provider store={store}>\n        <I18nextProvider i18n={i18n}>\n          <Router basename={this.props.routerBasename}>\n            <WhiteLabellingContext.Provider value={this.props.whiteLabelling}>\n              <OHIFStandaloneViewer />\n            </WhiteLabellingContext.Provider>\n          </Router>\n        </I18nextProvider>\n      </Provider>\n    );\n  }\n}\n\nexport default App;\n\n// Make our managers accessible\nexport { commandsManager, extensionManager, hotkeysManager };\n"]},"metadata":{},"sourceType":"module"}