{"version":3,"file":"index.es.js","sources":["../src/OHIFDicomPDFSopClassHandler.js","../src/OHIFComponentPlugin.js","../src/TypedArrayProp.js","../src/DicomPDFViewport.js","../src/OHIFDicomPDFViewport.js","../src/index.js"],"sourcesContent":["import { MODULE_TYPES, utils } from 'ohif-core';\n\n// TODO: Should probably use dcmjs for this\nconst SOP_CLASS_UIDS = {\n  ENCAPSULATED_PDF: '1.2.840.10008.5.1.4.1.1.104.1'\n};\n\nconst OHIFDicomPDFSopClassHandler = {\n  id: 'OHIFDicomPDFSopClassHandlerPlugin',\n  type: MODULE_TYPES.SOP_CLASS_HANDLER,\n  sopClassUids: [SOP_CLASS_UIDS.ENCAPSULATED_PDF],\n  getDisplaySetFromSeries(series, study, dicomWebClient, authorizationHeaders) {\n    const instance = series.getFirstInstance();\n\n    return {\n      plugin: 'pdf',\n      displaySetInstanceUid: utils.guid(),\n      wadoRoot: study.getData().wadoRoot,\n      wadoUri: instance.getData().wadouri,\n      sopInstanceUid: instance.getSOPInstanceUID(),\n      seriesInstanceUid: series.getSeriesInstanceUID(),\n      studyInstanceUid: study.getStudyInstanceUID(),\n      authorizationHeaders: authorizationHeaders\n    };\n  }\n};\n\nexport default OHIFDicomPDFSopClassHandler;\n","import React from 'react';\nimport PropTypes from \"prop-types\";\n\nfunction OHIFComponentPlugin(props) {\n  return (<React.Fragment>{props.children}</React.Fragment>);\n}\n\nOHIFComponentPlugin.propTypes = {\n  id: PropTypes.string.isRequired,\n  init: PropTypes.func.isRequired,\n  destroy: PropTypes.func.isRequired,\n  children: PropTypes.node\n};\n\nexport default OHIFComponentPlugin;\n","// https://github.com/facebook/prop-types/issues/69\n\nexport const TypedArrayProp = {\n  any: (props, propName, componentName) => {\n    let obj = props[propName];\n    if (!(obj instanceof Float64Array ||\n      obj instanceof Float32Array ||\n      obj instanceof Int32Array ||\n      obj instanceof Int16Array ||\n      obj instanceof Int8Array ||\n      obj instanceof Uint32Array ||\n      obj instanceof Uint16Array ||\n      obj instanceof Uint8Array ||\n      obj instanceof Uint8ClampedArray)) {\n      return new Error(\n        'Invalid prop `' + propName + '` supplied to' +\n        ' `' + componentName + '`. Expected a typed array.'\n      );\n    }\n  },\n\n  float64: (props, propName, componentName) => {\n    if (!(props[propName] instanceof Float64Array)) {\n      return new Error(\n        'Invalid prop `' + propName + '` supplied to' +\n        ' `' + componentName + '`. Expected a Float64Array.'\n      );\n    }\n  },\n\n  float32: (props, propName, componentName) => {\n    if (!(props[propName] instanceof Float32Array)) {\n      return new Error(\n        'Invalid prop `' + propName + '` supplied to' +\n        ' `' + componentName + '`. Expected a Float32Array.'\n      );\n    }\n  },\n\n  float: (props, propName, componentName) => {\n    if (!(props[propName] instanceof Float64Array ||\n      props[propName] instanceof Float32Array)) {\n      return new Error(\n        'Invalid prop `' + propName + '` supplied to' +\n        ' `' + componentName + '`. Expected a Float32Array or Float64Array.'\n      );\n    }\n  },\n\n  int32: (props, propName, componentName) => {\n    if (!(props[propName] instanceof Int32Array)) {\n      return new Error(\n        'Invalid prop `' + propName + '` supplied to' +\n        ' `' + componentName + '`. Expected an Int32Array.'\n      );\n    }\n  },\n\n  int16: (props, propName, componentName) => {\n    if (!(props[propName] instanceof Int16Array)) {\n      return new Error(\n        'Invalid prop `' + propName + '` supplied to' +\n        ' `' + componentName + '`. Expected an In16Array.'\n      );\n    }\n  },\n\n  int8: (props, propName, componentName) => {\n    if (!(props[propName] instanceof Int8Array)) {\n      return new Error(\n        'Invalid prop `' + propName + '` supplied to' +\n        ' `' + componentName + '`. Expected an Int8Array.'\n      );\n    }\n  },\n\n  int: (props, propName, componentName) => {\n    if (!(props[propName] instanceof Int32Array ||\n      props[propName] instanceof Int16Array ||\n      props[propName] instanceof Int8Array)) {\n      return new Error(\n        'Invalid prop `' + propName + '` supplied to' +\n        ' `' + componentName + '`. Expected an Int32Array, In16Array, or Int8Array.'\n      );\n    }\n  },\n\n  uint32: (props, propName, componentName) => {\n    if (!(props[propName] instanceof Uint32Array)) {\n      return new Error(\n        'Invalid prop `' + propName + '` supplied to' +\n        ' `' + componentName + '`. Expected a Uint32Array.'\n      );\n    }\n  },\n\n  uint16: (props, propName, componentName) => {\n    if (!(props[propName] instanceof Uint16Array)) {\n      return new Error(\n        'Invalid prop `' + propName + '` supplied to' +\n        ' `' + componentName + '`. Expected a Uint16Array.'\n      );\n    }\n  },\n\n  uint8: (props, propName, componentName) => {\n    if (!(props[propName] instanceof Uint8Array)) {\n      return new Error(\n        'Invalid prop `' + propName + '` supplied to' +\n        ' `' + componentName + '`. Expected a Uint8Array.'\n      );\n    }\n  },\n\n  uint8clamped: (props, propName, componentName) => {\n    if (!(props[propName] instanceof Uint8ClampedArray)) {\n      return new Error(\n        'Invalid prop `' + propName + '` supplied to' +\n        ' `' + componentName + '`. Expected a Uint8ClampedArray.'\n      );\n    }\n  },\n\n  uint: (props, propName, componentName) => {\n    if (!(props[propName] instanceof Uint32Array ||\n      props[propName] instanceof Uint16Array ||\n      props[propName] instanceof Uint8Array ||\n      props[propName] instanceof Uint8ClampedArray)) {\n      return new Error(\n        'Invalid prop `' + propName + '` supplied to' +\n        ' `' + componentName + '`. Expected a Uint32Array, Uint16Array, Uint8Array, or Uint8ClampedArray.'\n      );\n    }\n  },\n};\n\nexport { TypedArrayProp as default };\n","import React, { Component } from 'react';\nimport dicomParser from 'dicom-parser';\nimport TypedArrayProp from './TypedArrayProp';\n\n// TODO: Should probably use dcmjs for this\nconst SOP_CLASS_UIDS = {\n  ENCAPSULATED_PDF: '1.2.840.10008.5.1.4.1.1.104.1'\n};\n\nclass DicomPDFViewport extends Component {\n  state = {\n    fileURL: null,\n    error: null\n  };\n\n  static propTypes = {\n    byteArray: TypedArrayProp.uint8\n  };\n\n  renderPDF = dataSet => {\n    const sopClassUid = dataSet.string('x00080016');\n\n    if (sopClassUid !== SOP_CLASS_UIDS.ENCAPSULATED_PDF) {\n      throw new Error('This is not a DICOM-encapsulated PDF');\n    }\n\n    const fileTag = dataSet.elements.x00420011;\n    const offset = fileTag.dataOffset;\n    const remainder = offset + fileTag.length;\n    const pdfByteArray = dataSet.byteArray.slice(offset, remainder);\n    const PDF = new Blob([pdfByteArray], { type: 'application/pdf' });\n    const fileURL = URL.createObjectURL(PDF);\n\n    this.setState({\n      fileURL\n    });\n  };\n\n  parseByteArray = byteArray => {\n    const options = {\n      untilTag: ''\n    };\n\n    let dataSet;\n\n    try {\n      dataSet = dicomParser.parseDicom(byteArray, options);\n    } catch (error) {\n      this.setState({\n        error\n      });\n    }\n\n    return dataSet;\n  };\n\n  componentDidMount() {\n    const dataSet = this.parseByteArray(this.props.byteArray);\n\n    this.renderPDF(dataSet);\n  }\n\n  render() {\n    return (\n      <div\n        className={'DicomPDFViewport'}\n        style={{ width: '100%', height: '100%' }}\n      >\n        {this.state.fileURL && (\n          <object\n            data={this.state.fileURL}\n            type=\"application/pdf\"\n            width=\"100%\"\n            height=\"100%\"\n          />\n        )}\n        {this.state.error && <h2>{JSON.stringify(this.state.error)}</h2>}\n      </div>\n    );\n  }\n}\n\nexport default DicomPDFViewport;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport OHIF from 'ohif-core';\nimport OHIFComponentPlugin from './OHIFComponentPlugin.js';\nimport DicomPDFViewport from './DicomPDFViewport';\n\nconst { DICOMWeb } = OHIF;\n\nclass OHIFDicomPDFViewport extends Component {\n  static propTypes = {\n    studies: PropTypes.object,\n    displaySet: PropTypes.object,\n    viewportIndex: PropTypes.number\n  };\n\n  state = {\n    byteArray: null,\n    error: null\n  };\n\n  static id = 'DicomPDFViewportPDF';\n\n  static init() {\n    console.log('DicomPDFViewport init()');\n  }\n\n  static destroy() {\n    console.log('DicomPDFViewport destroy()');\n  }\n\n  componentDidMount() {\n    const { displaySet } = this.props.viewportData;\n    const { studyInstanceUid, seriesInstanceUid, sopInstanceUid, wadoRoot, wadoUri, authorizationHeaders} = displaySet;\n\n    this.retrieveDicomData(studyInstanceUid, seriesInstanceUid, sopInstanceUid, wadoRoot, wadoUri, authorizationHeaders).then(byteArray => {\n      this.setState({\n        byteArray\n      });\n    }, error => {\n      this.setState({\n        error\n      });\n\n        throw new Error(error);\n      }\n    );\n  }\n\n  retrieveDicomData(studyInstanceUid, seriesInstanceUid, sopInstanceUid, wadoRoot, wadoUri, authorizationHeaders) {\n    // TODO: Passing in a lot of data we aren't using\n\n    // TODO: Authorization header depends on the server. If we ever have multiple servers\n    // we will need to figure out how / when to pass this information in.\n    return fetch(wadoUri, {\n      headers: authorizationHeaders\n    }).then(response => response.arrayBuffer()).then(arraybuffer => {\n      return new Uint8Array(arraybuffer);\n    });\n  }\n\n  render() {\n    const { id, init, destroy } = OHIFDicomPDFViewport;\n    const pluginProps = { id, init, destroy };\n\n    return (\n      <OHIFComponentPlugin {...pluginProps}>\n        {this.state.byteArray && (\n          <DicomPDFViewport byteArray={this.state.byteArray} />\n        )}\n        {this.state.error && <h2>{JSON.stringify(this.state.error)}</h2>}\n      </OHIFComponentPlugin>\n    );\n  }\n}\n\nexport default OHIFDicomPDFViewport;\n","import OHIFDicomPDFSopClassHandler from './OHIFDicomPDFSopClassHandler.js';\nimport OHIFDicomPDFViewport from './OHIFDicomPDFViewport.js';\n\nexport default {\n  /**\n   * Only required property. Should be a unique value across all extensions.\n   */\n  id: 'pdf',\n\n  getViewportModule() {\n    return OHIFDicomPDFViewport;\n  },\n  getSopClassHandlerModule() {\n    return OHIFDicomPDFSopClassHandler;\n  }\n};\n"],"names":["SOP_CLASS_UIDS","ENCAPSULATED_PDF","OHIFDicomPDFSopClassHandler","id","type","MODULE_TYPES","SOP_CLASS_HANDLER","sopClassUids","getDisplaySetFromSeries","series","study","dicomWebClient","authorizationHeaders","instance","getFirstInstance","plugin","displaySetInstanceUid","utils","guid","wadoRoot","getData","wadoUri","wadouri","sopInstanceUid","getSOPInstanceUID","seriesInstanceUid","getSeriesInstanceUID","studyInstanceUid","getStudyInstanceUID","OHIFComponentPlugin","props","children","propTypes","PropTypes","string","isRequired","init","func","destroy","node","TypedArrayProp","any","propName","componentName","obj","Float64Array","Float32Array","Int32Array","Int16Array","Int8Array","Uint32Array","Uint16Array","Uint8Array","Uint8ClampedArray","Error","float64","float32","float","int32","int16","int8","int","uint32","uint16","uint8","uint8clamped","uint","DicomPDFViewport","fileURL","error","dataSet","sopClassUid","fileTag","elements","x00420011","offset","dataOffset","remainder","length","pdfByteArray","byteArray","slice","PDF","Blob","URL","createObjectURL","setState","options","untilTag","dicomParser","parseDicom","parseByteArray","renderPDF","width","height","state","JSON","stringify","Component","DICOMWeb","OHIF","OHIFDicomPDFViewport","displaySet","viewportData","retrieveDicomData","then","fetch","headers","response","arrayBuffer","arraybuffer","pluginProps","console","log","studies","object","viewportIndex","number","getViewportModule","getSopClassHandlerModule"],"mappings":"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"}